import{u as _,r as u,a as r,o,c as l,b as d,d as g,t as k,e as m}from"./index.a7f24905.js";const b={class:"container mt-4"},y={key:0,class:"favorite"},$={key:0},x={key:1},I=m("h1",null,"\u55AE\u7B46\u5167\u6587",-1),B={__name:"SpotView",setup(C){const f=_(),n=u(),i=u(f.params.id),c=u(),v=u(),a=u(!1),p=e=>{const s=`; ${document.cookie}`.split(`; ${e}=`);if(s.length===2)return s.pop().split(";").shift()},h=()=>{if(a.value===!1){a.value=!0;const e=n.value[0];e.userId.push(c.value),r.put(`http://localhost:3000/data/${i.value}`,e).then(t=>{console.log(t)}).catch(t=>{console.log(t)})}else if(a.value===!0){a.value=!1;let e=n.value[0],t=e.userId.indexOf(c.value);e.userId.splice(t,1),r.put(`http://localhost:3000/data/${i.value}`,e).then(s=>{console.log(s)}).catch(s=>{console.log(s)})}};return r.get(`http://localhost:3000/data?id=${i.value}`).then(e=>{n.value=e.data,v.value=!!p("token"),c.value=p("userId"),n.value[0].userId.includes(c.value)?a.value=!0:a.value=!1}).catch(e=>{console.log(e)}),(e,t)=>(o(),l("div",b,[v.value?(o(),l("div",y,[a.value?a.value?(o(),l("p",x,"\u5DF2\u52A0\u5165\u6536\u85CF")):d("",!0):(o(),l("p",$,"\u672A\u52A0\u5165\u6536\u85CF")),a.value?a.value?(o(),l("button",{key:3,type:"button",class:"mb-4 btn btn-light",onClick:t[1]||(t[1]=s=>h())},"\u53D6\u6D88\u6536\u85CF")):d("",!0):(o(),l("button",{key:2,type:"button",class:"mb-4 btn btn-warning",onClick:t[0]||(t[0]=s=>h())},"\u52A0\u5165\u6536\u85CF"))])):d("",!0),I,g(" "+k(n.value),1)]))}};export{B as default};
